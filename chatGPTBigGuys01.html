<!DOCTYPE html>
<html>
<head>
	<title>Image Gallery</title>
	<style>
		.body {
			margin: 0;
			padding: 0;
		}
		.container {
			position: relative;
			width: 100%;
			height: 100vh;
		}
		.image {
			position: relative;
			width: 100%;
			height: 100%;
			background-size: cover;
			background-position: center;
			cursor: pointer;
		}
		.modal {
			position: fixed;
			top: 0;
			left: 0;
			width: 80%;
			height: 80%;
			margin: auto;
			background-color: white;
			box-shadow: 0px 0px 10px rgba(0,0,0,0.5);
			display: none;
			z-index: 999;
		}
		.modal.open {
			display: block;
		}
		.modal-header {
			background-color: #333;
			color: white;
			padding: 10px;
		}
		.modal-header h2 {
			margin: 0;
		}
		.modal-body {
			position: relative;
			height: calc(100% - 50px);
			overflow: auto;
			padding: 10px;
		}
		.modal-image {
			position: absolute;
			top: 0;
			left: 0;
			width: 100px;
			height: 100px;
			background-size: cover;
			background-position: center;
			cursor: pointer;
			z-index: 1;
		}
		.modal-image.active {
			z-index: 999;
		}
		.audio {
			display: none;
		}
	</style>
	<script>
		window.addEventListener('load', function() {
			const container = document.querySelector('.container');
			const images = container.querySelectorAll('.image');
			const modal = document.querySelector('.modal');
			const modalBody = modal.querySelector('.modal-body');
			const modalImages = modal.querySelectorAll('.modal-image');
			const audioElements = modal.querySelectorAll('.audio');
			let activeImageIndex = -1;

			function showModal(index) {
				activeImageIndex = index;
				modal.classList.add('open');
				modalImages[activeImageIndex].classList.add('active');
				audioElements[activeImageIndex].currentTime = 0;
				audioElements[activeImageIndex].play();
			}

			function hideModal() {
				modal.classList.remove('open');
				modalImages[activeImageIndex].classList.remove('active');
				audioElements[activeImageIndex].pause();
			}

			images.forEach(function(image, index) {
				image.addEventListener('click', function() {
					showModal(index);
				});
			});

			modalImages.forEach(function(image, index) {
				image.addEventListener('click', function() {
					if (index !== activeImageIndex) {
						modalImages[activeImageIndex].classList.remove('active');
						audioElements[activeImageIndex].pause();
						activeImageIndex = index;
						modalImages[activeImageIndex].classList.add('active');
						audioElements[activeImageIndex].currentTime = 0;
						audioElements[activeImageIndex].play();
					}
				});
				image.addEventListener('mousedown', function(event) {
					const startX = event.clientX;
					const startY = event.clientY;
					const startLeft = image.offsetLeft;
					const startTop = image.offsetTop;
					let dragImage = true;
					document.addEventListener('mousemove', function(event) {
						if ( (dragImage) {
							const diffX = event.clientX - startX;
							const diffY = event.clientY - startY;
							image.style.left = startLeft + diffX + 'px';
							image.style.top = startTop + diffY + 'px';
						});
						document.addEventListener('mouseup', function(event) {
							dragImage = false;
						});
					});
				});
			const randomizeArray = function(arr) {
				for (let i = arr.length - 1; i > 0; i--) {
					const j = Math.floor(Math.random() * (i + 1));
					[arr[i], arr[j]] = [arr[j], arr[i]];
				}
				return arr;
			};

			const imagesArray = randomizeArray([
				"assets/img/gifs/email-send-icon.gif",
  				"assets/img/gifs/fax-icon.gif",
  				"assets/img/gifs/jc-icon.gif",
  				"assets/img/gifs/lucy-icon.gif",
			]);

			images.forEach(function(image, index) {
				image.style.backgroundImage = 'url(' + imagesArray[index] + ')';
			});

			const audioArray = randomizeArray([
				"assets/audio/newGraphic001/fax.mp3",
  				"assets/audio/newGraphic001/fax2.mp3",
  				"assets/audio/newGraphic001/percussive.mp3",
  				"assets/audio/newGraphic001/shrillambient.mp3",
			]);

			audioElements.forEach(function(audio, index) {
				audio.src = audioArray[index];
			});
		});
</script>
</head>
<body>
	<div class="container">
		<div class="image"></div>
		<div class="image"></div>
		<div class="image"></div>
		<div class="image"></div>
	</div>
	<div class="modal">
		<div class="modal-header">
			<h2>Image Gallery</h2>
		</div>
			<div class="modal-body">
			<div class="modal-image"></div>
			<div class="modal-image"></div>
			<div class="modal-image"></div>
			<div class="modal-image"></div>
			<audio class="audio"></audio>
			<audio class="audio"></audio>
			<audio class="audio"></audio>
			<audio class="audio"></audio>
		</div>
	</div>
</body>
</html>